<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>İlan Oluştur • Üreten Eller</title>
  <meta name="description" content="Üreten Eller'de ilan oluşturun. Çok dilli arayüz: TR/EN/AR/DE. Fotoğraf önizleme, kapak seçimi ve silme desteklenir." />
  <link rel="icon" href="/assets/icons/favicon.png" />
  <style>
    :root{ --bg1:#0b1220; --bg2:#0a0f1c; --card:#0e172a; --ink:#e5e7eb; --muted:#9ca3af; --accent:#22d3ee; --ok:#10b981; --warn:#f59e0b; --err:#ef4444; --brd:#1f2937 }
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--ink)}
    .wrap{max-width:960px;margin:24px auto;padding:16px}
    .card{background:var(--card);border:1px solid var(--brd);border-radius:18px;padding:20px;box-shadow:0 8px 24px rgba(0,0,0,.25)}
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .lang{display:flex;gap:8px;align-items:center}
    label{display:block;font-size:13px;color:var(--muted);margin:6px 0}
    input,select,textarea{width:100%;background:#0b1326;color:var(--ink);border:1px solid var(--brd);border-radius:12px;padding:10px 12px}
    textarea{min-height:120px;resize:vertical}
    .previews{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:10px;margin-top:10px}
    .thumb{position:relative;border:1px solid var(--brd);border-radius:10px;overflow:hidden;background:#0b1326;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:6px}
    .thumb img{width:100%;height:auto;max-height:220px;object-fit:contain;display:block;border-radius:8px;margin-bottom:6px}
    .thumb .btns{display:flex;gap:6px;justify-content:center;margin-bottom:4px}
    .thumb button{background:rgba(0,0,0,.65);color:#fff;border:none;padding:4px 8px;font-size:12px;border-radius:6px;cursor:pointer}
    .thumb .cover{position:absolute;top:6px;left:6px;background:#10b981;color:#03222a;font-size:12px;padding:2px 6px;border-radius:8px;font-weight:700}
    .actions{display:flex;gap:8px;justify-content:flex-end}
    button{cursor:pointer;border:1px solid var(--brd);background:#0d1b2a;color:var(--ink);padding:8px 12px;border-radius:10px}
    button.primary{background:var(--accent);color:#03222a;border:none;font-weight:700}
    .hint{font-size:12px;color:var(--muted)}
  </style>
  <script type="module" src="/firebase-init.js"></script>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="topbar">
        <div>
          <h1 id="t_title">İlan Oluştur</h1>
          <p class="hint" id="t_sub">PREMIUM: <strong>10 ilan</strong> + <strong>1 vitrin</strong>. FREE: <strong>5 ilan</strong>. Tüm ilanlar <strong>30 gün</strong> yayında.</p>
        </div>
        <div class="lang">
          <label id="t_lang" for="langSel">Dil</label>
          <select id="langSel">
            <option value="tr">Türkçe</option>
            <option value="en">English</option>
            <option value="ar">العربية</option>
            <option value="de">Deutsch</option>
          </select>
        </div>
      </div>

      <form id="listingForm" novalidate style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:10px">
        <div class="full" style="grid-column:1/-1">
          <label id="l_title">Başlık</label>
          <input id="title" required placeholder="Örn: El yapımı örgü bebek" maxlength="80" />
          <div class="hint" id="h_title">6–80 karakter</div>
        </div>
        <div class="full" style="grid-column:1/-1">
          <label id="l_description">Açıklama</label>
          <textarea id="description" required placeholder="Ürünü detaylı anlatın" maxlength="3000"></textarea>
          <div class="hint" id="h_description">30–3000 karakter, uygunsuz içerik reddedilir.</div>
        </div>

        <div>
          <label id="l_category">Kategori</label>
          <select id="category" required></select>
        </div>
        <div>
          <label id="l_subcategory">Alt Kategori</label>
          <select id="subcategory" required disabled></select>
        </div>

        <div>
          <label id="l_province">İl</label>
          <select id="province" required></select>
        </div>
        <div>
          <label id="l_district">İlçe</label>
          <input id="districtInput" required placeholder="İlçenizi yazın" />
        </div>

        <div>
          <label id="l_price">Fiyat (TL)</label>
          <input id="price" type="number" min="1" step="1" placeholder="Örn: 350" required />
        </div>
        <div>
          <label id="l_stock">Stok</label>
          <select id="stock" required>
            <option value="var">Var</option>
            <option value="yok">Yok</option>
          </select>
        </div>

        <div class="full" style="grid-column:1/-1">
          <label id="l_images">Fotoğraflar (en fazla 5)</label>
          <input id="images" type="file" accept="image/*" multiple />
          <div id="previews" class="previews"></div>
        </div>

        <div class="full" style="display:flex; align-items:center; gap:10px; grid-column:1/-1">
          <input id="showcase" type="checkbox" />
          <label id="l_showcase" for="showcase">Vitrin (yalnızca PREMIUM)</label>
        </div>

        <div class="full actions" style="grid-column:1/-1">
          <button type="reset" id="b_cancel">İptal</button>
          <button type="submit" class="primary" id="b_submit">Kaydet</button>
        </div>

        <div class="full" style="grid-column:1/-1">
          <div id="msg" class="hint"></div>
        </div>
      </form>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" style="position:fixed;left:50%;top:20px;transform:translateX(-50%) scale(0.95);opacity:0;transition:.25s;z-index:9999;background:#0e172a;border:1px solid #1f2937;color:#e5e7eb;padding:10px 14px;border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.35);">Yönetici onayından sonra yayınlanacaktır.</div>

  <script>
(function(){
'use strict';

    // === i18n (TR/EN/AR/DE) ===
    const i18n = {
      tr:{ title:"İlan Oluştur", sub:"PREMIUM: <strong>10 ilan</strong> + <strong>1 vitrin</strong>. FREE: <strong>5 ilan</strong>. Tüm ilanlar <strong>30 gün</strong> yayında.", lang:"Dil",
        l_title:"Başlık", h_title:"6–80 karakter",
        l_description:"Açıklama", h_description:"30–3000 karakter, uygunsuz içerik reddedilir.",
        l_category:"Kategori", l_subcategory:"Alt Kategori", l_province:"İl", l_district:"İlçe",
        l_price:"Fiyat (TL)", l_stock:"Stok", l_images:"Fotoğraflar (en fazla 5)", l_showcase:"Vitrin (yalnızca PREMIUM)",
        btn_cancel:"İptal", btn_submit:"İlana Gönder (Onaya)", toast_ok:"Yönetici onayından sonra yayınlanacaktır.",
        placeholders:{ title:"Örn: El yapımı örgü bebek", desc:"Ürünü detaylı anlatın", district:"İlçenizi yazın", price:"Örn: 350" },
        stock:{var:"Var", yok:"Yok"},
        errors:{ title:"Başlık en az 6 karakter olmalı.", desc:"Açıklama en az 30 karakter olmalı.", cat:"Kategori seçiniz.", sub:"Alt kategori seçiniz.", prov:"İl seçiniz.", dist:"İlçe yazınız.", price:"Fiyat 1 TL ve üzeri olmalı.", files:"En fazla 5 fotoğraf yükleyebilirsiniz.", filetype:"Sadece JPG/PNG/WebP kabul edilir.", auth:"Oturum bulunamadı. Lütfen giriş yapın." },
        cover:"Kapak", coverMake:"Kapak Yap", del:"Sil", choose:"Seçiniz"
      },
      en:{ title:"Create Listing", sub:"PREMIUM: <strong>10 listings</strong> + <strong>1 showcase</strong>. FREE: <strong>5 listings</strong>. All listings stay live for <strong>30 days</strong>.", lang:"Language",
        l_title:"Title", h_title:"6–80 characters",
        l_description:"Description", h_description:"30–3000 characters; inappropriate content is rejected.",
        l_category:"Category", l_subcategory:"Subcategory", l_province:"Province", l_district:"District",
        l_price:"Price (TRY)", l_stock:"Stock", l_images:"Photos (up to 5)", l_showcase:"Showcase (PREMIUM only)",
        btn_cancel:"Cancel", btn_submit:"Submit for Review", toast_ok:"Will be published after admin approval.",
        placeholders:{ title:"e.g., Hand‑knitted doll", desc:"Describe your product in detail", district:"Type your district", price:"e.g., 350" },
        stock:{var:"In stock", yok:"Out of stock"},
        errors:{ title:"Title must be at least 6 characters.", desc:"Description must be at least 30 characters.", cat:"Select a category.", sub:"Select a subcategory.", prov:"Select a province.", dist:"Enter a district.", price:"Price must be ≥ 1.", files:"You can upload up to 5 photos.", filetype:"Only JPG/PNG/WebP accepted.", auth:"No session. Please sign in." },
        cover:"Cover", coverMake:"Make Cover", del:"Delete", choose:"Select"
      },
      ar:{ title:"إنشاء إعلان", sub:"المميز: <strong>10 إعلانات</strong> + <strong>1 واجهة</strong>. المجاني: <strong>5 إعلانات</strong>. كل إعلان يبقى <strong>30 يوماً</strong>.", lang:"اللغة",
        l_title:"العنوان", h_title:"6–80 حرفاً",
        l_description:"الوصف", h_description:"30–3000 حرفاً؛ يتم رفض المحتوى غير الملائم.",
        l_category:"الفئة", l_subcategory:"الفئة الفرعية", l_province:"الولاية", l_district:"القضاء",
        l_price:"السعر (ليرة)", l_stock:"التوفّر", l_images:"صور (حتى 5)", l_showcase:"واجهة (للمميز فقط)",
        btn_cancel:"إلغاء", btn_submit:"إرسال للمراجعة", toast_ok:"سيُنشر بعد موافقة الإدارة.",
        placeholders:{ title:"مثال: دمية محاكة", desc:"صف المنتج بالتفصيل", district:"اكتب اسم القضاء", price:"مثال: 350" },
        stock:{var:"متوفر", yok:"غير متوفر"},
        errors:{ title:"يجب أن يكون العنوان 6 أحرف على الأقل.", desc:"الوصف يجب أن يكون 30 حرفاً على الأقل.", cat:"اختر فئة.", sub:"اختر فئة فرعية.", prov:"اختر ولاية.", dist:"أدخل القضاء.", price:"السعر يجب أن يكون ≥ 1.", files:"يمكنك رفع حتى 5 صور.", filetype:"يُقبل فقط JPG/PNG/WebP.", auth:"لا توجد جلسة. يرجى تسجيل الدخول." },
        cover:"غلاف", coverMake:"اجعله غلافاً", del:"حذف", choose:"اختر"
      },
      de:{ title:"Anzeige erstellen", sub:"PREMIUM: <strong>10 Anzeigen</strong> + <strong>1 Schaufenster</strong>. FREE: <strong>5 Anzeigen</strong>. Jede Anzeige bleibt <strong>30 Tage</strong> online.", lang:"Sprache",
        l_title:"Titel", h_title:"6–80 Zeichen",
        l_description:"Beschreibung", h_description:"30–3000 Zeichen; unzulässiger Inhalt wird abgelehnt.",
        l_category:"Kategorie", l_subcategory:"Unterkategorie", l_province:"Provinz", l_district:"Bezirk",
        l_price:"Preis (TRY)", l_stock:"Bestand", l_images:"Fotos (bis zu 5)", l_showcase:"Schaufenster (nur PREMIUM)",
        btn_cancel:"Abbrechen", btn_submit:"Zur Prüfung einreichen", toast_ok:"Wird nach Admin‑Freigabe veröffentlicht.",
        placeholders:{ title:"z. B. Handgestrickte Puppe", desc:"Beschreiben Sie Ihr Produkt", district:"Bezirk eingeben", price:"z. B. 350" },
        stock:{var:"Auf Lager", yok:"Nicht vorrätig"},
        errors:{ title:"Titel muss mind. 6 Zeichen haben.", desc:"Beschreibung mind. 30 Zeichen.", cat:"Kategorie wählen.", sub:"Unterkategorie wählen.", prov:"Provinz wählen.", dist:"Bezirk eingeben.", price:"Preis muss ≥ 1 sein.", files:"Max. 5 Fotos.", filetype:"Nur JPG/PNG/WebP.", auth:"Keine Sitzung. Bitte anmelden." },
        cover:"Cover", coverMake:"Als Cover", del:"Löschen", choose:"Auswählen"
      }
    };

    // === Kategoriler çok dilli (TR/EN/DE/AR) ===
    const cats = [
      {id:'yemek', names:{tr:'🍲 Yemekler', en:'🍲 Meals', de:'🍲 Mahlzeiten', ar:'🍲 وجبات'}, subs:[
        ['evyemek','Ev yemekleri','Home-cooked','Hausmannskost','وجبات منزلية'],
        ['borek','Börek-çörek','Savory pastries','Herzhaftes Gebäck','فطائر مالحة'],
        ['corba','Çorba','Soup','Suppe','شوربة'],
        ['zeytiny','Zeytinyağlı','Olive-oil dishes','Gerichte mit Olivenöl','أطباق بزيت الزيتون'],
        ['pilav','Pilav-makarna','Rice & pasta','Reis & Pasta','أرز ومعكرونة'],
        ['et','Et-tavuk','Meat & chicken','Fleisch & Huhn','لحوم ودجاج'],
        ['kahvalti','Kahvaltılık','Breakfast items','Frühstück','مأكولات الإفطار'],
        ['meze','Meze','Mezes','Vorspeisen','مقبلات'],
        ['dondur','Dondurulmuş','Frozen','Tiefgekühlt','مجمد'],
        ['cocuk','Çocuk öğünleri','Kids meals','Kindergerichte','وجبات الأطفال'],
        ['diyetvegf','Diyet/vegan/gf','Diet/Vegan/GF','Diät/Vegan/GF','حمية/نباتي/خالٍ من الغلوتين']
      ]},
      {id:'pasta', names:{tr:'🎂 Pasta & Tatlı', en:'🎂 Cakes & Sweets', de:'🎂 Torten & Süßes', ar:'🎂 كعك وحلويات'}, subs:[
        ['yaspasta','Yaş pasta','Fresh cakes','Torten','كيك طازج'],
        ['kek','Kek-cupcake','Cakes & cupcakes','Kuchen & Cupcakes','كيك وكب كيك'],
        ['kurabiye','Kurabiye','Cookies','Kekse','بسكويت'],
        ['serbetli','Şerbetli','Syrup desserts','Sirup-Desserts','حلويات شرقية'],
        ['sutlu','Sütlü','Milky desserts','Milchige Desserts','حلويات بالحليب'],
        ['cheese','Cheesecake','Cheesecake','Käsekuchen','تشيزكيك'],
        ['diyettat','Diyet tatlı','Diet desserts','Diät-Desserts','حلويات للحمية'],
        ['cikolata','Çikolata/şekerleme','Chocolate/Candy','Schokolade/Süßwaren','شوكولاتة/حلوى'],
        ['dogumset','Doğum günü setleri','Birthday sets','Geburtstags‑Sets','مجموعات عيد ميلاد']
      ]},
      {id:'sos', names:{tr:'🫙 Reçel • Turşu • Sos', en:'🫙 Jams • Pickles • Sauces', de:'🫙 Marmelade • Eingelegtes • Saucen', ar:'🫙 مربى • مخللات • صلصات'}, subs:[
        ['recel','Reçel-marmelat','Jam & marmalade','Marmelade','مربى'],
        ['pekmez','Pekmez','Molasses','Traubensirup','دبس'],
        ['tursu','Turşu','Pickles','Eingelegtes','مخلل'],
        ['dom','Domates/biber sos','Tomato/pepper sauce','Tomaten/Paprika‑Sauce','صلصة طماطم/فلفل'],
        ['acios','Acı sos','Hot sauce','Scharfe Soße','صلصة حارة'],
        ['salca','Salça','Paste','Tomatenmark','معجون'],
        ['sirke','Sirke','Vinegar','Essig','خل'],
        ['konserve','Konserve','Canned','Konserven','معلبات']
      ]},
      {id:'yoresel', names:{tr:'🌾 Yöresel / Kışlık', en:'🌾 Local / Winter Prep', de:'🌾 Regional / Wintervorrat', ar:'🌾 محلي / مؤونة الشتاء'}, subs:[
        ['eriste','Erişte','Homemade noodles','Hausgemachte Nudeln','شعيرية منزلية'],
        ['tarhana','Tarhana','Tarhana','Tarhana','طرخانة'],
        ['yufka','Yufka','Yufka','Yufka','يوفكا'],
        ['manti','Mantı','Manti dumplings','Manti‑Teigtaschen','مانتي'],
        ['kurut','Kurutulmuş sebze-meyve','Dried veg & fruit','Getrocknetes Obst/Gemüse','مجففات'],
        ['salca2','Salça','Paste','Tomatenmark','معجون'],
        ['sirke2','Sirke','Vinegar','Essig','خل'],
        ['konserve2','Konserve','Canned','Konserven','معلبات']
      ]},
      {id:'diet', names:{tr:'🥗 Diyet / Vegan / Glutensiz', en:'🥗 Diet / Vegan / Gluten‑Free', de:'🥗 Diät / Vegan / Glutenfrei', ar:'🥗 حمية / نباتي / خالٍ من الغلوتين'}, subs:[
        ['fit','Fit tabaklar','Fit plates','Fitness‑Teller','أطباق صحية'],
        ['vegan','Vegan yemekler','Vegan meals','Vegane Gerichte','أطباق نباتية'],
        ['gf','GF unlu mamuller','GF bakery','Glutenfreie Backwaren','مخبوزات خالية من الغلوتين'],
        ['sekersiz','Şekersiz tatlı','Sugar‑free desserts','Zuckerfreie Desserts','حلويات بدون سكر'],
        ['keto','Keto ürün','Keto products','Keto‑Produkte','منتجات كيتو'],
        ['protein','Protein atıştırmalık','Protein snacks','Protein‑Snacks','وجبات بروتينية']
      ]},
      {id:'taki', names:{tr:'💍 Takı', en:'💍 Jewelry', de:'💍 Schmuck', ar:'💍 إكسسوارات'}, subs:[
        ['bileklik','Bileklik','Bracelet','Armband','سوار'],
        ['kolye','Kolye','Necklace','Halskette','عقد'],
        ['kupe','Küpe','Earrings','Ohrringe','أقراط'],
        ['yuzuk','Yüzük','Ring','Ring','خاتم'],
        ['halhal','Halhal','Anklet','Fußkettchen','خلخال'],
        ['bros','Broş','Brooch','Brosche','بروش'],
        ['set','Setler','Sets','Sets','أطقم'],
        ['isimli','İsimli/kişiye özel','Personalized','Personalisiert','مخصص بالاسم'],
        ['makrome','Makrome','Macramé','Makramee','مكرمية'],
        ['dogaltas','Doğal taş','Gemstone','Edelstein','أحجار طبيعية'],
        ['recine','Reçine','Resin','Harz','ريزن'],
        ['telsarma','Tel sarma','Wire wrap','Drahtwickel','سلك ملتف']
      ]},
      {id:'bebek', names:{tr:'👶 Bebek & Çocuk', en:'👶 Baby & Kids', de:'👶 Baby & Kinder', ar:'👶 رضّع وأطفال'}, subs:[
        ['fig','Hayvan/bebek figürleri','Animal/baby figures','Tier/Baby‑Figuren','مجسمات'],
        ['cingirak','Çıngırak','Rattle','Rassel','خشخيشة'],
        ['dis','Diş kaşıyıcı örgü','Teething knit','Beißring‑Häkel','عضاضة محاكة'],
        ['bezoy','Bez oyuncak/kitap','Cloth toy/book','Stoffspielzeug/Buch','لعبة/كتاب قماشي'],
        ['montessori','Montessori oyuncak','Montessori toys','Montessori‑Spielzeug','ألعاب منتسوري'],
        ['set2','Setler','Sets','Sets','أطقم'],
        ['patik','Örgü patik-bere','Knit booties‑beanie','Gehäkelte Schühchen & Mütze','قبعات وجوارب محاكة'],
        ['battaniye','Bebek battaniyesi','Baby blanket','Babydecke','بطانية'],
        ['onluk','Önlük-ağız bezi','Bib/burp cloth','Lätzchen/Spucktuch','مريلة/منديل'],
        ['lohusa','Lohusa seti','Maternity set','Wochenbett‑Set','عدة نفاس'],
        ['sac','Saç aksesuarı','Hair accessory','Haaraccessoire','اكسسوار شعر'],
        ['giyim','El emeği kıyafet','Handmade clothing','Handgemachte Kleidung','ملابس يدوية']
      ]},
      {id:'orgu', names:{tr:'🧶 Örgü / Triko', en:'🧶 Knitting / Crochet', de:'🧶 Strick / Häkeln', ar:'🧶 حياكة / كروشيه'}, subs:[
        ['hirka','Hırka','Cardigan','Strickjacke','كارديغان'],
        ['kazak','Kazak','Sweater','Pullover','كنزة'],
        ['atkibere','Atkı-bere','Scarf & beanie','Schal & Mütze','وشاح وقبعة'],
        ['panco','Panço','Poncho','Poncho','بونشو'],
        ['sal','Şal','Shawl','Schal','شال'],
        ['corap','Çorap','Socks','Socken','جوارب'],
        ['lif','Lif takımı','Bath set','Badeset','طقم ليف'],
        ['bebektk','Bebek takımı','Baby set','Baby‑Set','طقم أطفال'],
        ['yelek','Yelek','Vest','Weste','صديري'],
        ['kirlen','Kırlent-örtü','Cushion/cover','Kissen/Decke','وسادة/غطاء'],
        ['igneoyasi','İğne oyası','Needle lace','Nadelspitze','أويا (إبرة)']
      ]},
      {id:'terzi', names:{tr:'✂️ Dikiş / Terzilik', en:'✂️ Sewing / Tailoring', de:'✂️ Nähen / Schneiderei', ar:'✂️ خياطة / تفصيل'}, subs:[
        ['paca','Paça/onarım','Hem/repair','Saum/Reparatur','ثني/تصليح'],
        ['fermuar','Fermuar değişimi','Zipper change','Reißverschluss‑Wechsel','تبديل سحاب'],
        ['perde','Perde dikişi','Curtain sewing','Vorhang‑Nähen','خياطة ستائر'],
        ['nevresim','Nevresim-yastık','Bedding & pillows','Bettwäsche/Kissen','مفارش ووسائد'],
        ['masa','Masa örtüsü','Tablecloth','Tischtuch','مفرش طاولة'],
        ['ozel','Özel dikim','Custom tailoring','Maßanfertigung','تفصيل خاص'],
        ['kostum','Kostüm','Costume','Kostüm','زيّ']
      ]},
      {id:'makrome', names:{tr:'🧵 Makrome & Dekor', en:'🧵 Macramé & Decor', de:'🧵 Makramee & Deko', ar:'🧵 مكرمية وديكور'}, subs:[
        ['duvar','Duvar süsü','Wall hanging','Wandbehang','ديكور جداري'],
        ['saksi','Saksı askısı','Plant hanger','Pflanzenhänger','حامل نباتات'],
        ['anahtar','Anahtarlık','Keychain','Schlüsselanhänger','ميدالية'],
        ['avize','Avize','Chandelier','Deckenleuchte','ثريا'],
        ['runner','Amerikan servis/runner','Placemat/runner','Tischset/Runner','مفرش سفرة'],
        ['sepet','Sepet','Basket','Korb','سلة'],
        ['raf','Raf/duvar dekoru','Shelf/wall decor','Regal/Wanddeko','رف/ديكور']
      ]},
      {id:'evdekor', names:{tr:'🏠 Ev Dekor & Aksesuar', en:'🏠 Home Decor & Accessories', de:'🏠 Wohndeko & Accessoires', ar:'🏠 ديكور المنزل وإكسسوارات'}, subs:[
        ['kece','Keçe işleri','Felt crafts','Filzarbeiten','أعمال لبّاد'],
        ['kirlent','Kırlent','Cushion','Kissen','وسادة'],
        ['kapi','Kapı süsü','Door ornament','Türkranz','زينة باب'],
        ['tepsi','Tepsi süsleme','Tray decoration','Tablett‑Deko','تزيين صينية'],
        ['cerceve','Çerçeve','Frame','Rahmen','إطار'],
        ['ruya','Rüya kapanı','Dreamcatcher','Traumfänger','صائد أحلام'],
        ['tablo','Tablo','Tableau','Bild','لوحة']
      ]},
      {id:'mum', names:{tr:'🕯️ Mum & Kokulu Ürünler', en:'🕯️ Candles & Fragranced', de:'🕯️ Kerzen & Duft', ar:'🕯️ شموع ومنتجات عطرية'}, subs:[
        ['soya','Soya/balmumu mum','Soy/beeswax candle','Soja/Bienenwachs‑Kerze','شموع صويا/شمع العسل'],
        ['tas','Kokulu taş','Scented stone','Duftstein','حجر معطر'],
        ['sprey','Oda spreyi','Room spray','Raumspray','معطر جو'],
        ['tutsu','Tütsü','Incense','Räucherwerk','بخور'],
        ['jel','Jel mum','Gel candle','Gelkerze','شمعة جل'],
        ['hediye','Hediye seti','Gift set','Geschenkset','طقم هدايا']
      ]},
      {id:'kozmetik', names:{tr:'🧼 Doğal Sabun & Kozmetik', en:'🧼 Natural Soap & Cosmetics', de:'🧼 Natürliche Seife & Kosmetik', ar:'🧼 صابون طبيعي ومستحضرات'}, subs:[
        ['zeytin','Zeytinyağlı sabun','Olive‑oil soap','Olivenölseife','صابون زيت زيتون'],
        ['bitkisel','Bitkisel sabunlar','Herbal soaps','Kräuterseifen','صابون عشبي'],
        ['sampuan','Katı şampuan','Solid shampoo','Festes Shampoo','شامبو صلب'],
        ['balm','Dudak balmı','Lip balm','Lippenbalsam','بلسم شفاه'],
        ['krem','Krem/merhem','Cream/ointment','Creme/Salbe','كريم/مرهم'],
        ['banyotuzu','Banyo tuzu','Bath salt','Badesalz','ملح الاستحمام'],
        ['lavanta','Lavanta kesesi','Lavender sachet','Lavendelsäckchen','كيس لافندر']
      ]},
      {id:'amigurumi', names:{tr:'🧸 Amigurumi & Oyuncak (dekor)', en:'🧸 Amigurumi & Decorative Toys', de:'🧸 Amigurumi & Deko‑Spielzeug', ar:'🧸 أميجورومي وألعاب ديكورية'}, subs:[
        ['anahtar2','Anahtarlık','Keychain','Schlüsselanhänger','ميدالية'],
        ['magnet','Magnet','Magnet','Magnet','مغناطيس'],
        ['kolek','Koleksiyon figürü','Collectible figure','Sammelfigur','مجسّم مجموعات'],
        ['dekorbebek','Dekor bebek/karakter','Decor doll/character','Deko‑Puppe/Figur','دمية/شخصية ديكور']
      ]}
    ];

    const PROVINCES = [
      "Adana","Adıyaman","Afyonkarahisar","Ağrı","Aksaray","Amasya","Ankara","Antalya","Ardahan","Artvin","Aydın","Balıkesir","Bartın","Batman","Bayburt","Bilecik","Bingöl","Bitlis","Bolu","Burdur","Bursa","Çanakkale","Çankırı","Çorum","Denizli","Diyarbakır","Düzce","Edirne","Elazığ","Erzincan","Erzurum","Eskişehir","Gaziantep","Giresun","Gümüşhane","Hakkari","Hatay","Iğdır","Isparta","İstanbul","İzmir","Kahramanmaraş","Karabük","Karaman","Kars","Kastamonu","Kayseri","Kırıkkale","Kırklareli","Kırşehir","Kilis","Kocaeli","Konya","Kütahya","Malatya","Manisa","Mardin","Mersin","Muğla","Muş","Nevşehir","Niğde","Ordu","Osmaniye","Rize","Sakarya","Samsun","Siirt","Sinop","Sivas","Şanlıurfa","Şırnak","Tekirdağ","Tokat","Trabzon","Tunceli","Uşak","Van","Yalova","Yozgat","Zonguldak"
    ].sort((a,b)=>a.localeCompare(b,'tr'));

    // === Helpers ===
    window.$ = (id)=> document.getElementById(id);
    function setLang(lng){
      const t = i18n[lng]||i18n.tr; document.documentElement.lang=lng; document.documentElement.dir=(lng==='ar')?'rtl':'ltr';
      $('t_title').textContent=t.title; $('t_sub').innerHTML=t.sub; $('t_lang').textContent=t.lang;
      $('l_title').textContent=t.l_title; $('h_title').textContent=t.h_title;
      $('l_description').textContent=t.l_description; $('h_description').textContent=t.h_description;
      $('l_category').textContent=t.l_category; $('l_subcategory').textContent=t.l_subcategory;
      $('l_province').textContent=t.l_province; $('l_district').textContent=t.l_district;
      $('l_price').textContent=t.l_price; $('l_stock').textContent=t.l_stock; $('l_images').textContent=t.l_images; $('l_showcase').textContent=t.l_showcase;
      $('b_cancel').textContent=t.btn_cancel; $('b_submit').textContent=t.btn_submit;
      $('title').placeholder=t.placeholders.title; $('description').placeholder=t.placeholders.desc; $('districtInput').placeholder=t.placeholders.district; $('price').placeholder=t.placeholders.price;
      const stock=$('stock'); stock.options[0].textContent=t.stock.var; stock.options[1].textContent=t.stock.yok;
      rebuildCategories(lng); fillProvinces(lng);
      // buton/metinler önizleme
      window.__t = t;
      // toast örnek metni güncelle
      $('toast').textContent = t.toast_ok;
    }

    function rebuildCategories(lng){
      const selCat=$('category'); const selSub=$('subcategory');
      selCat.innerHTML = `<option value="" disabled selected>${i18n[lng].choose}</option>` +
        cats.map(c=>`<option value="${c.id}">${c.names[lng]||c.names.tr}</option>`).join('');
      selSub.disabled = true; selSub.innerHTML = `<option value="" disabled selected>${i18n[lng].choose}</option>`;
      selCat.onchange = ()=>{
        const c=cats.find(x=>x.id===selCat.value); selSub.disabled = !c;
        const idx = {tr:1,en:2,de:3,ar:4}[lng] || 1;
        selSub.innerHTML = `<option value="" disabled selected>${i18n[lng].choose}</option>` +
          (c? c.subs.map(s=>`<option value="${s[0]}">${s[idx]}</option>`).join('') : '');
      };
    }

    function fillProvinces(lng){
      const selProv=$('province'); const choose=i18n[lng].choose;
      selProv.innerHTML = `<option value="" disabled selected>${choose}</option>` + PROVINCES.map(p=>`<option value="${p}">${p}</option>`).join('');
    }
    // export helpers to global for module scripts
    window.setLang = setLang;
    window.rebuildCategories = rebuildCategories;
    window.fillProvinces = fillProvinces;

    // Başlangıç dili TR
    const sel=$('langSel'); sel.value='tr'; setLang('tr');
    sel.addEventListener('change', ()=> setLang(sel.value));
    // İller & kategoriler ilk doldurma
    fillProvinces('tr'); rebuildCategories('tr');
})();
</script>
</body>
</html>
